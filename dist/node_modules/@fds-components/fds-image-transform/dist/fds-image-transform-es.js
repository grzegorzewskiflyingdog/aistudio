function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let a;function s(t,e){return a||(a=document.createElement("a")),a.href=e,t===a.href}const c="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function l(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function M(){return g(" ")}function p(){return g("")}function y(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function f(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function L(t,e,n,o){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function x(t,e,n){t.classList[n?"add":"remove"](e)}class m{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){var o;this.e||(this.is_svg?this.e=(o=e.nodeName,document.createElementNS("http://www.w3.org/2000/svg",o)):this.e=h(11===e.nodeType?"TEMPLATE":e.nodeName),this.t="TEMPLATE"!==e.tagName?e:e.content,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)u(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(d)}}function j(t){const e={};for(const n of t)e[n.name]=n.value;return e}let w;function N(t){w=t}function $(){if(!w)throw new Error("Function called outside component initialization");return w}function T(){const t=$();return(e,n,{cancelable:o=!1}={})=>{const i=t.$$.callbacks[e];if(i){const r=function(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,o,e),i}(e,n,{cancelable:o});return i.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}const b=[],z=[];let C=[];const D=[],E=Promise.resolve();let v=!1;function I(){v||(v=!0,E.then(S))}function k(){return I(),E}function A(t){C.push(t)}const O=new Set;let Y=0;function S(){if(0!==Y)return;const t=w;do{try{for(;Y<b.length;){const t=b[Y];Y++,N(t),_(t.$$)}}catch(t){throw b.length=0,Y=0,t}for(N(null),b.length=0,Y=0;z.length;)z.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];O.has(e)||(O.add(e),e())}C.length=0}while(b.length);for(;D.length;)D.pop()();v=!1,O.clear(),N(t)}function _(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const Q=new Set;function B(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];C.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),C=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function R(r,a,s,c,l,u,h,g=[-1]){const M=w;N(r);const p=r.$$={fragment:null,ctx:[],props:u,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a.context||(M?M.$$.context:[])),callbacks:n(),dirty:g,skip_bound:!1,root:a.target||M.$$.root};h&&h(p.root);let y=!1;if(p.ctx=s?s(r,a.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return p.ctx&&l(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),y&&function(t,e){-1===t.$$.dirty[0]&&(b.push(t),I(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(r,t)),e})):[],p.update(),y=!0,o(p.before_update),p.fragment=!!c&&c(p.ctx),a.target){if(a.hydrate){const t=function(t){return Array.from(t.childNodes)}(a.target);p.fragment&&p.fragment.l(t),t.forEach(d)}else p.fragment&&p.fragment.c();a.intro&&((f=r.$$.fragment)&&f.i&&(Q.delete(f),f.i(L))),function(t,n,r,a){const{fragment:s,after_update:c}=t.$$;s&&s.m(n,r),a||A((()=>{const n=t.$$.on_mount.map(e).filter(i);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),c.forEach(A)}(r,a.target,a.anchor,a.customElement),S()}var f,L;N(M)}let U;function H(t,e){return{x:t.x-e.x,y:t.y-e.y}}function W(t){return Math.sqrt(t.x*t.x+t.y*t.y)}"function"==typeof HTMLElement&&(U=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(i);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){o(this.$$.on_disconnect)}$destroy(){B(this,1),this.$destroy=t}$on(e,n){if(!i(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var Z={add:function(t,e){return{x:t.x+e.x,y:t.y+e.y}},subtract:H,sub:H,scale:function(t,e){return{x:t.x*e,y:t.y*e}},rotate:function(t,e,n={x:0,y:0}){const o=t.x-n.x,i=t.y-n.y;return{x:n.x+o*Math.cos(e)-i*Math.sin(e),y:n.y+i*Math.cos(e)+o*Math.sin(e)}},direction:function(t){const e=Math.atan(t.x/t.y);return t.y>0?e+Math.PI:e},length:W,len:W};const{window:J}=c;function P(t){let e,n;return{c(){e=h("img"),L(e,"width","100%"),L(e,"height","100%"),s(e.src,n=t[3]||t[0].url||K)||f(e,"src",n)},m(n,o){u(n,e,o),t[33](e)},p(t,o){9&o[0]&&!s(e.src,n=t[3]||t[0].url||K)&&f(e,"src",n)},d(n){n&&d(e),t[33](null)}}}function X(t){let e,n;return{c(){e=new m(!1),n=p(),e.a=n},m(o,i){e.m(t[2],o,i),u(o,n,i)},p(t,n){4&n[0]&&e.p(t[2])},d(t){t&&d(n),t&&e.d()}}}function G(t){let e,n,o,i=t[5]&&F();return{c(){e=h("div"),n=h("slot"),n.innerHTML='<div class="handle-shape"></div>',o=M(),i&&i.c(),f(n,"name","rotator"),f(e,"class","handle rotator")},m(r,a){u(r,e,a),l(e,n),l(e,o),i&&i.m(e,null),t[38](e)},p(t,n){t[5]?i||(i=F(),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(n){n&&d(e),i&&i.d(),t[38](null)}}}function F(t){let e;return{c(){e=h("div"),f(e,"class","rotator-bar")},m(t,n){u(t,e,n)},d(t){t&&d(e)}}}function V(e){let n,i,r,a=function(t){let e,n,i,r,a,s,c,g,p,m,j,w,N,$,T,b,z,C,D,E;function v(t,e){return t[2]?X:P}let I=v(t),k=I(t),A=t[4]&&G(t);return{c(){e=h("div"),n=h("div"),i=h("div"),k.c(),r=M(),a=h("div"),a.innerHTML="<slot></slot>",s=M(),c=h("div"),g=h("div"),g.innerHTML='<slot name="handle"><div class="handle-shape"></div></slot>',p=M(),m=h("div"),m.innerHTML='<slot name="handle"><div class="handle-shape"></div></slot>',j=M(),w=h("div"),w.innerHTML='<slot name="handle"><div class="handle-shape"></div></slot>',N=M(),$=h("div"),$.innerHTML='<slot name="handle"><div class="handle-shape"></div></slot>',T=M(),A&&A.c(),z=M(),C=h("div"),f(i,"class","contents"),L(a,"width","80px"),L(a,"height","50px"),L(a,"position","sticky"),L(a,"z-index","5"),L(a,"bottom","0px"),L(a,"left","0px"),L(a,"align-self","flex-end"),f(g,"class","handle corner top right"),f(m,"class","handle corner bottom right"),f(w,"class","handle corner bottom left"),f($,"class","handle corner top left"),f(c,"class","frame"),f(n,"class","free-transform"),f(n,"style",b=t[10]?t[1].style:null),x(n,"noclicks",!t[6]),f(C,"class","fullwidthheight"),L(C,"display","none"),f(e,"class","transform-area")},m(o,d){u(o,e,d),l(e,n),l(n,i),k.m(i,null),l(n,r),l(n,a),l(n,s),l(n,c),l(c,g),t[34](g),l(c,p),l(c,m),t[35](m),l(c,j),l(c,w),t[36](w),l(c,N),l(c,$),t[37]($),l(c,T),A&&A.m(c,null),t[39](n),l(e,z),l(e,C),t[40](e),D||(E=[y(n,"pointerdown",t[18]),y(e,"pointerup",t[20]),y(e,"click",t[22])],D=!0)},p(t,e){I===(I=v(t))&&k?k.p(t,e):(k.d(1),k=I(t),k&&(k.c(),k.m(i,null))),t[4]?A?A.p(t,e):(A=G(t),A.c(),A.m(c,null)):A&&(A.d(1),A=null),1026&e[0]&&b!==(b=t[10]?t[1].style:null)&&f(n,"style",b),64&e[0]&&x(n,"noclicks",!t[6])},d(n){n&&d(e),k.d(),t[34](null),t[35](null),t[36](null),t[37](null),A&&A.d(),t[39](null),t[40](null),D=!1,o(E)}}}(e);return{c(){a&&a.c(),n=p(),this.c=t},m(t,o){a&&a.m(t,o),u(t,n,o),i||(r=[y(J,"pointermove",e[19]),y(J,"pointerup",e[21]),y(J,"keyup",e[16]),y(J,"keydown",e[17])],i=!0)},p(t,e){a.p(t,e)},i:t,o:t,d(t){a&&a.d(t),t&&d(n),i=!1,o(r)}}}let K="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMTI2cHgiIGhlaWdodD0iMTI2cHgiIHZpZXdCb3g9IjAgMCAxMjYgMTI2IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMjYgMTI2IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxyZWN0IHg9IjEuMDk1IiB5PSI5OC4yMjQiIHdpZHRoPSIxMjMuODEiIGhlaWdodD0iMTkuMjc1Ii8+DQoJPHJlY3QgeD0iMS4wOTUiIHk9Ijg1Ljc0IiB3aWR0aD0iMTIzLjgxIiBoZWlnaHQ9IjUuMjA1Ii8+DQoJPHBhdGggZD0iTTE4LjQwNCw5NS43MjFjMC43NjcsMCwxLjM4OS0wLjYyMywxLjM4OS0xLjM5cy0wLjYyMi0xLjM4OC0xLjM4OS0xLjM4OEgzLjQ4MWMtMC43NjcsMC0xLjM4OCwwLjYyMS0xLjM4OCwxLjM4OA0KCQlzMC42MjIsMS4zOSwxLjM4OCwxLjM5SDE4LjQwNHoiLz4NCgk8cGF0aCBkPSJNNDQuNDMzLDk1LjcyMWMwLjc2NywwLDEuMzg4LTAuNjIzLDEuMzg4LTEuMzlzLTAuNjIyLTEuMzg4LTEuMzg4LTEuMzg4SDI5LjUxYy0wLjc2NywwLTEuMzg5LDAuNjIxLTEuMzg5LDEuMzg4DQoJCXMwLjYyMiwxLjM5LDEuMzg5LDEuMzlINDQuNDMzeiIvPg0KCTxwYXRoIGQ9Ik03MC40NjEsOTUuNzIxYzAuNzY3LDAsMS4zODgtMC42MjMsMS4zODgtMS4zOXMtMC42MjItMS4zODgtMS4zODgtMS4zODhINTUuNTM5Yy0wLjc2NywwLTEuMzg4LDAuNjIxLTEuMzg4LDEuMzg4DQoJCXMwLjYyMiwxLjM5LDEuMzg4LDEuMzlINzAuNDYxeiIvPg0KCTxwYXRoIGQ9Ik05Ni40OSw5NS43MjFjMC43NjcsMCwxLjM4OS0wLjYyMywxLjM4OS0xLjM5cy0wLjYyMi0xLjM4OC0xLjM4OS0xLjM4OEg4MS41NjdjLTAuNzY3LDAtMS4zODgsMC42MjEtMS4zODgsMS4zODgNCgkJczAuNjIyLDEuMzksMS4zODgsMS4zOUg5Ni40OXoiLz4NCgk8cGF0aCBkPSJNMTIyLjUxOSw5NS43MjFjMC43NjcsMCwxLjM4OS0wLjYyMywxLjM4OS0xLjM5cy0wLjYyMi0xLjM4OC0xLjM4OS0xLjM4OGgtMTQuOTIzYy0wLjc2NywwLTEuMzg4LDAuNjIxLTEuMzg4LDEuMzg4DQoJCXMwLjYyMiwxLjM5LDEuMzg4LDEuMzlIMTIyLjUxOXoiLz4NCgk8cGF0aCBkPSJNNy40MSw4MC45aDUzLjQ0MmMwLjg2MywwLDEuNTYyLTAuNjk5LDEuNTYyLTEuNTYyVjM5LjU0M2MwLTAuODYyLTAuNjk5LTEuNTYzLTEuNTYyLTEuNTYzSDQ1LjMxNHYtNi41MzkNCgkJYzAtMC44NjEtMC42OTgtMS41NjItMS41NjEtMS41NjJIMjMuNDI4Yy0wLjg2MywwLTEuNTYyLDAuNy0xLjU2MiwxLjU2MnY2LjU0SDcuNDFjLTAuODYyLDAtMS41NjIsMC43LTEuNTYyLDEuNTYzdjM5Ljc5NQ0KCQlDNS44NDgsODAuMjAxLDYuNTQ3LDgwLjksNy40MSw4MC45eiBNMzQuNDkyLDU3Ljg3NGgtMS43OTZ2LTYuNzY4aDEuNzk2VjU3Ljg3NHogTTI2LjU2MywzNC41NzRoMTQuMDU1djMuNDA2SDI2LjU2M1YzNC41NzR6DQoJCSBNMTAuNTQ0LDQyLjY3OGg0Ny4xNzN2MTEuOThIMzYuOTQydi00LjAwNmMwLTAuODYzLTAuNjk5LTEuNTYzLTEuNTYyLTEuNTYzaC0zLjU4MmMtMC44NjMsMC0xLjU2MiwwLjY5OS0xLjU2MiwxLjU2M3Y0LjAwNg0KCQlIMTAuNTQ0VjQyLjY3OHoiLz4NCgk8cGF0aCBkPSJNNjguNzM0LDgwLjloNDkuOTU4YzAuODA3LDAsMS40Ni0wLjY1MywxLjQ2LTEuNDZWMTcuNTM0YzAtMC44MDYtMC42NTMtMS40NTktMS40Ni0xLjQ1OWgtMTQuNTI0VjkuOTYxDQoJCWMwLTAuODA3LTAuNjUzLTEuNDYtMS40Ni0xLjQ2aC0xOWMtMC44MDcsMC0xLjQ2LDAuNjUzLTEuNDYsMS40NnY2LjExNUg2OC43MzRjLTAuODA3LDAtMS40NiwwLjY1My0xLjQ2LDEuNDU5Vjc5LjQ0DQoJCUM2Ny4yNzQsODAuMjQ3LDY3LjkyNyw4MC45LDY4LjczNCw4MC45eiBNODYuNjM4LDEyLjg5aDEzLjEzOXYzLjE4Nkg4Ni42MzhWMTIuODl6Ii8+DQo8L2c+DQo8L3N2Zz4NCg==";function q(t){return t&&t.target&&"handle"===t.target.type}function tt(t){const e=t.getBoundingClientRect();return e.x=e.left,e.y=e.top,e.center={x:(e.left+e.right)/2,y:(e.top+e.bottom)/2},e}function et(t,e,n){let o=!1,i=$();const r=T(),a=(t,e)=>{(e=p).endDrag=!!o,o&&(o=!o),r(t="transformchange",e),i.dispatchEvent&&i.dispatchEvent(new CustomEvent(t,{detail:e}))};let s,c,l,u,d,h,g={x:null,y:null,w:null,h:null,r:null},{layerimagedata:M={}}=e,{position:p=g}=e,{target:y=null}=e,{container:f=null}=e,{rotatorEnabled:L=!0}=e,{rotatorBar:x=!1}=e,{handleMode:m="resize"}=e,{lockAspect:j=!1}=e,{lockTouchResize:w=!1}=e,{captureClicks:N=!0}=e,{zoom:b=100}=e,{ratio:C=window.devicePixelRatio}=e,{imageurl:D}=e,{imagesvg:E}=e,{svgcolor:v}=e,{type:I}=e,A=!1,O=!1;const Y={};let S,_,Q,B,R,U,H=0;var W;function J(){(M?._x||0==M?._x)&&n(1,p.x=M._x,p),(M?._y||0==M?._y)&&n(1,p.y=M._y,p),M?._width&&n(1,p.w=M._width,p),M?._height&&n(1,p.h=M._height,p),(M?.x||0==M?.x)&&n(1,p.x=P(M.x),p),(M?.y||0==M?.y)&&n(1,p.y=P(M.y),p),M?.width&&n(1,p.w=P(M.width),p),M?.height&&n(1,p.h=P(M.height),p),M?.r&&n(1,p.r=M.rotation,p),M?.rotation&&n(1,p.r=M.rotation,p),(M?._x||0==M?._x)&&M._imgwidth&&(n(1,p.x=P(M._imgx),p),n(1,p.y=P(M._imgy),p),n(1,p.w=P(M._imgwidth),p),n(1,p.h=P(M._imgheight),p),delete M._imgx,delete M._imgy,delete M._imgwidth,delete M._imgheight)}function P(t){return t*(parseFloat(b)/100/C)}W=()=>{n(8,c.onload=()=>{n(1,p={x:c.x,y:c.y,w:c.naturalWidth,h:c.naturalHeight,r:0}),J(),async function(){await k(),S&&(h=S.getBoundingClientRect(),a("boundsChanged",p))}()},c),y||n(23,y=S),f||n(25,f=y.parentNode)},$().$$.on_mount.push(W);const X={x:"left",y:"top",w:"width",h:"height"};function G(t){return"position: absolute; "+["x","y","w","h"].map((e=>null!=t[e]?`${X[e]}: ${t[e]}px; `:"")).join(" ")+`; transform: rotate(${t.r}rad)`}function F(t,e){const o=function(t,e){const n=g.r,o=d.center,i=Z.sub(o,{x:g.w/2,y:g.h/2}),r=Z.rotate(t.end,-n,e),a=r.x-e.x,s=r.y-e.y,c=Z.add(i,{x:Math.abs(a/2),y:Math.abs(s/2)}),l=Z.add(c,{x:-a/2,y:-s/2}),u=Z.rotate(l,n,c);return{width:a,height:s,translate:Z.sub(e,u)}}(t,e,d.center);n(1,p.x=g.x+o.translate.x,p),n(1,p.y=g.y+o.translate.y,p),n(1,p.w=Math.abs(o.width),p),n(1,p.h=Math.abs(o.height),p)}function V(t,e,o,i){const r=function(t,e,n,o,i){const r=e.start?e.start:e,a=e.end?e.end:e,s=Z.sub(r,t.start),c=Z.sub(a,t.end),l=Z.length(c)/Z.length(s),u=o?0:Z.direction(s)-Z.direction(c),d=Z.add(Z.rotate(Z.scale(Z.sub(n,r),l),u,{x:0,y:0}),a);return{scale:i?1:l,rotate:u,translate:Z.sub(d,n),center:d}}(t,e,d.center,o,i);n(1,p.w=g.w*r.scale,p),n(1,p.h=g.h*r.scale,p);const a=Z.sub(d.center,g),s=Z.add(Z.add(a,r.translate),{x:-p.w/2,y:-p.h/2});n(1,p.x=g.x+s.x-u.left,p),n(1,p.y=g.y+s.y-u.top,p),n(1,p.r=g.r+r.rotate,p)}async function K(){await k(),S&&(h=S.getBoundingClientRect()),a("positionChanged",p)}return t.$$set=t=>{"layerimagedata"in t&&n(0,M=t.layerimagedata),"position"in t&&n(1,p=t.position),"target"in t&&n(23,y=t.target),"container"in t&&n(25,f=t.container),"rotatorEnabled"in t&&n(4,L=t.rotatorEnabled),"rotatorBar"in t&&n(5,x=t.rotatorBar),"handleMode"in t&&n(26,m=t.handleMode),"lockAspect"in t&&n(24,j=t.lockAspect),"lockTouchResize"in t&&n(27,w=t.lockTouchResize),"captureClicks"in t&&n(6,N=t.captureClicks),"zoom"in t&&n(28,b=t.zoom),"ratio"in t&&n(29,C=t.ratio),"imageurl"in t&&n(3,D=t.imageurl),"imagesvg"in t&&n(2,E=t.imagesvg),"svgcolor"in t&&n(30,v=t.svgcolor),"type"in t&&n(31,I=t.type)},t.$$.update=()=>{8388736&t.$$.dirty[0]&&n(10,O=y===S),1073741828&t.$$.dirty[0]&&E&&v&&(n(2,E=E.replace("<svg ",`<svg style="fill:${v}" `)),n(0,M.url=n(3,D="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(E)))),M)),16777220&t.$$.dirty[0]&&E&&j&&(n(2,E=E.replace('preserveAspectRatio="none"'," ")),n(2,E=E.replace('class="fullwidthheight"'," ")),n(0,M.url=n(3,D="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(E)))),M)),16777220&t.$$.dirty[0]&&E&&!j&&(n(2,E=E.replace("<svg ",'<svg preserveAspectRatio="none" class="fullwidthheight" ')),n(0,M.url=n(3,D="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(E)))),M)),2&t.$$.dirty[0]&&n(1,p.style=G(p),p),1&t.$$.dirty[0]&&M&&M.url,268435458&t.$$.dirty[0]|2&t.$$.dirty[1]&&b&&b!=s&&(n(32,s=b),J(),n(1,p.style=G(p),p))},[M,p,E,D,L,x,N,S,c,l,O,_,Q,B,R,U,function(t){16===t.keyCode&&n(24,j=!1)},function(t){16===t.keyCode&&n(24,j=!0)},function(t){let e=function(t){return _.contains(t.target)?{type:"handle",top:!0,right:!0}:Q.contains(t.target)?{type:"handle",top:!0,left:!0}:B.contains(t.target)?{type:"handle",bottom:!0,right:!0}:R.contains(t.target)?{type:"handle",bottom:!0,left:!0}:U&&U.contains(t.target)?{type:"rotate"}:{type:"body"}}(t),n=Y[t.pointerId];if(n?(n.end.x=t.pageX,n.end.y=t.pageY,n.target=e):(H++,n={id:t.pointerId,priority:H-1,start:{x:t.pageX,y:t.pageY},end:{x:t.pageX,y:t.pageY},target:e},Y[t.pointerId]=n),A=!1,n.priority<2)if(d=tt(y),u=tt(f),H>1&&Object.values(Y).forEach((t=>{t.id!==t&&(t.start.x=t.end.x),t.start.y=t.end.y})),g.x=p.x,g.y=p.y,g.w=p.w,g.h=p.h,g.r=p.r,"handle"===e.type){let t;t=e.top?e.right?R:B:e.right?Q:_;const n=t.getBoundingClientRect(),o={x:(n.left+n.right)/2,y:(n.top+n.bottom)/2};Y.anchor=o}else delete Y.anchor;K()},function(t){o=!1;let e=Y[t.pointerId];if(e&&e.priority<2){if(A=!0,e.end.x=t.pageX,e.end.y=t.pageY,function(t){return t&&t.target&&"body"===t.target.type&&1===H}(e))!function(t){n(1,p.y=g.y+(t.end.y-t.start.y),p),n(1,p.x=g.x+(t.end.x-t.start.x),p)}(e);else if(function(t){return t&&t.target&&("rotate"===t.target.type||"handle"===t.target.type&&"rotate"===m)}(e))V(e,d.center,!1,!0);else if(q(e)&&!j)F(e,Y.anchor);else if(q(e)&&j)V(e,Y.anchor,!0);else if(function(t){return t&&t.target&&"handle"!==t.target.type&&H>1}(e)){let t,n=H>1;t=n?Object.values(Y).find((t=>t.id!==e.id)):Y.anchor?Y.anchor:d.center,V(e,t,!1,n&&w)}K()}},function(t){A&&(o=!0,n(24,j=!1),A=!1,a("positionChanged",p))},function(t){let e=1/0;Y[t.pointerId]&&(H--,e=Y[t.pointerId].priority),delete Y[t.pointerId],H&&(g.y=p.y,g.x=p.x,g.w=p.w,g.h=p.h,g.r=p.r,Object.values(Y).forEach((t=>{t.id&&(t.priority>e&&t.priority--,t.start.x=t.end.x,t.start.y=t.end.y)})))},function(t){A||a("click",t.detail)},y,j,f,m,w,b,C,v,I,s,function(t){z[t?"unshift":"push"]((()=>{c=t,n(8,c)}))},function(t){z[t?"unshift":"push"]((()=>{_=t,n(11,_)}))},function(t){z[t?"unshift":"push"]((()=>{B=t,n(13,B)}))},function(t){z[t?"unshift":"push"]((()=>{R=t,n(14,R)}))},function(t){z[t?"unshift":"push"]((()=>{Q=t,n(12,Q)}))},function(t){z[t?"unshift":"push"]((()=>{U=t,n(15,U)}))},function(t){z[t?"unshift":"push"]((()=>{S=t,n(7,S)}))},function(t){z[t?"unshift":"push"]((()=>{l=t,n(9,l)}))}]}class nt extends U{constructor(t){super();const e=document.createElement("style");e.textContent=":root{--frameBorder:solid 1px cyan}.free-transform{position:absolute;top:0;left:0;right:0;bottom:0;transform-origin:center;touch-action:none;display:flex}.free-transform.noclicks{pointer-events:none}.contents{border:var(--frameBorder,2px solid #3965c7);position:absolute;top:0;left:0;right:0;bottom:0}.free-transform.noclicks .contents{pointer-events:none}.frame{position:absolute;top:0;left:0;right:0;bottom:0;cursor:move}.free-transform.noclicks .frame{pointer-events:none}.handle{position:absolute;user-select:none;touch-action:none;cursor:grab;pointer-events:auto}.handle:active{cursor:grabbing}.handle-shape{width:12px;height:12px;border-radius:50%;background:white;border:var(--frameBorder)}.handle.top{top:0px}.handle.right{right:0px}.handle.bottom{bottom:0px}.handle.left{left:0px}.handle.top.left{transform:translate(-50%,-50%) rotate(-45deg)}.handle.top.right{transform:translate(50%,-50%) rotate(45deg)}.handle.bottom.left{transform:translate(-50%,50%) rotate(-135deg)}.handle.bottom.right{transform:translate(50%,50%) rotate(135deg)}.handle.rotator{left:50%;top:-30px;transform:translateX(-50%)}.rotator-bar{position:absolute;top:100%;right:50%;width:1px;height:calc(30px - 100%);border-right:var(--frameBorder)}.transform-area{position:relative;width:100%;height:100%;flex-grow:1}.fullwidthheight{width:100%;height:100%}",this.shadowRoot.appendChild(e),R(this,{target:this.shadowRoot,props:j(this.attributes),customElement:!0},et,V,r,{layerimagedata:0,position:1,target:23,container:25,rotatorEnabled:4,rotatorBar:5,handleMode:26,lockAspect:24,lockTouchResize:27,captureClicks:6,zoom:28,ratio:29,imageurl:3,imagesvg:2,svgcolor:30,type:31},null,[-1,-1,-1]),t&&(t.target&&u(t.target,this,t.anchor),t.props&&(this.$set(t.props),S()))}static get observedAttributes(){return["layerimagedata","position","target","container","rotatorEnabled","rotatorBar","handleMode","lockAspect","lockTouchResize","captureClicks","zoom","ratio","imageurl","imagesvg","svgcolor","type"]}get layerimagedata(){return this.$$.ctx[0]}set layerimagedata(t){this.$$set({layerimagedata:t}),S()}get position(){return this.$$.ctx[1]}set position(t){this.$$set({position:t}),S()}get target(){return this.$$.ctx[23]}set target(t){this.$$set({target:t}),S()}get container(){return this.$$.ctx[25]}set container(t){this.$$set({container:t}),S()}get rotatorEnabled(){return this.$$.ctx[4]}set rotatorEnabled(t){this.$$set({rotatorEnabled:t}),S()}get rotatorBar(){return this.$$.ctx[5]}set rotatorBar(t){this.$$set({rotatorBar:t}),S()}get handleMode(){return this.$$.ctx[26]}set handleMode(t){this.$$set({handleMode:t}),S()}get lockAspect(){return this.$$.ctx[24]}set lockAspect(t){this.$$set({lockAspect:t}),S()}get lockTouchResize(){return this.$$.ctx[27]}set lockTouchResize(t){this.$$set({lockTouchResize:t}),S()}get captureClicks(){return this.$$.ctx[6]}set captureClicks(t){this.$$set({captureClicks:t}),S()}get zoom(){return this.$$.ctx[28]}set zoom(t){this.$$set({zoom:t}),S()}get ratio(){return this.$$.ctx[29]}set ratio(t){this.$$set({ratio:t}),S()}get imageurl(){return this.$$.ctx[3]}set imageurl(t){this.$$set({imageurl:t}),S()}get imagesvg(){return this.$$.ctx[2]}set imagesvg(t){this.$$set({imagesvg:t}),S()}get svgcolor(){return this.$$.ctx[30]}set svgcolor(t){this.$$set({svgcolor:t}),S()}get type(){return this.$$.ctx[31]}set type(t){this.$$set({type:t}),S()}}customElements.define("fds-image-transform",nt);export{nt as default};
//# sourceMappingURL=fds-image-transform-es.js.map
